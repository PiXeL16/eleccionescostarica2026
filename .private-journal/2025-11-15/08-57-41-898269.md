---
title: "8:57:41 AM - November 15, 2025"
date: 2025-11-15T07:57:41.898Z
timestamp: 1763193461898
---

## Project Notes

## Party Comparison Feature Analysis

### Key Files and Structure:
1. `/web/components/ComparisonView.tsx` - Main comparison component (272 lines)
2. `/web/components/PartySelector.tsx` - Party selection UI (120 lines)
3. `/web/components/ComparisonStats.tsx` - Statistics visualization (274 lines)
4. `/web/app/comparar/page.tsx` - Server component wrapper
5. `/web/app/layout.tsx` - Root layout with sticky header

### Layout Structure - Above vs Below Fold:

ABOVE FOLD (sticky/top):
- Header (line 94-120): "Comparar Partidos" title + description
- Info notice (line 122-136): TSE source citation
- PartySelector (line 138-139): Party selection grid
- Sticky party comparison header (line 145-180): Compact party cards with flags

BELOW FOLD (scrollable):
- Category comparison sections (line 184-261): Main content with grid layout
  - Each category is a card with responsive grid layout
  - Content includes: ideology badges, summaries, key proposals
  - Dynamic grid columns based on number of selected parties

### Responsive Design:
- PartySelector uses: `grid gap-3 sm:grid-cols-2 lg:grid-cols-3` (line 66)
- Comparison header uses dynamic grid: `repeat(${comparison.parties.length}, minmax(0, 1fr))` (line 154)
- Category content grid: Same dynamic column layout (line 196-198)
- Compact mobile design with responsive typography (sm: and lg: breakpoints)

### Sticky Elements:
- Header bar at line 145: `sticky top-[57px]` - positioned below the 57px global header
- White/translucent background with backdrop blur
- Z-index 10 for stacking above category cards

### Mobile UX Considerations:
- Grid adapts from 1 col (mobile) → 2 cols (tablet) → 3 cols (desktop) for party selector
- Truncated text for party names: `truncate` class (line 173)
- Images use responsive aspect ratios: `w-20 aspect-[5/2]` (line 163, 85)
- Font sizes adjust with sm: breakpoints

### Scroll Behavior Pattern:
The need to scroll comes from:
1. Large sticky header (global 57px + sticky comparison bar)
2. Party selector grid taking vertical space
3. Multiple category sections with long text content
4. Each category card has variable height based on content
5. No scroll container - relies on page scroll

### ComparisonStats Component:
- Currently defined but NOT used in ComparisonView (checked import)
- Has detailed charts and statistics
- Could be integrated below comparison view
- Uses recharts for visualizations

### Text with Citations:
- formatTextWithCitations function (line 21-56) adds clickable page references
- Links to PDF viewer at `/pdf/{party}?page={pageNum}`

