---
title: "10:31:31 PM - November 12, 2025"
date: 2025-11-12T21:31:31.328Z
timestamp: 1762983091328
---

## Project Notes

## Elecciones2026 Project Structure and Analysis

### Tech Stack Overview
- **Framework**: Next.js 14.2.0 (App Router, React 19)
- **Runtime**: Bun (configured for this project)
- **Styling**: Tailwind CSS 3 with dark mode support
- **Database**: SQLite (better-sqlite3)
- **Linting**: Biome 2.3.5
- **Language**: TypeScript 5

### Project Architecture

**Root Structure**:
- `/web` - Main Next.js application
- `/data` - SQLite database + party documents
- `/pipeline` - Data processing scripts (not explored)

**Web App Structure**:
- `/app` - Next.js App Router pages
  - `page.tsx` - Home page (party grid view)
  - `comparar/page.tsx` - Comparison page
  - `partido/[slug]/page.tsx` - Party detail pages
  - `layout.tsx` - Root layout with theme + header/footer
  - `globals.css` - Tailwind imports
  
- `/components` - React components (10 total)
  - `ComparisonView.tsx` - Client component for party comparison
  - `PartySelector.tsx` - Client component for selecting parties (max 3)
  - `Accordion.tsx` - Client component for expandable sections
  - `CategoryFilter.tsx` - Filter by political category
  - `FilterPanel.tsx` - UI for filtering
  - `BudgetTypeFilter.tsx` - Filter budget-related content
  - `IdeologyFilter.tsx` - Filter by ideology position
  - `HomeFilteredView.tsx` - Home page filtered view
  - `ThemeProvider.tsx` - Dark mode provider
  - `ThemeToggle.tsx` - Dark/light mode toggle

- `/lib` - Utility/business logic
  - `database.ts` - SQLite queries and data access layer (read-only)
  - `party-colors.ts` - Color palette for 20 parties (Tailwind classes)
  - `party-images.ts` - Party logo/flag image paths
  - `budget-parser.ts` - Parse budget mentions (PIB %, colones, USD)
  - `category-display.ts` - Category name display formatting

### Database Schema

**Tables**:
1. `parties` - 20 political parties
   - id, name, abbreviation, folder_name, ideology, website
   
2. `categories` - Political topics/themes
   - id, category_key, name, description, prompt_context, display_order, active
   
3. `party_positions` - Extracted positions per party/category
   - id, party_id, document_id, category_id
   - summary (AI-generated), key_proposals (JSON array)
   - ideology_position, budget_mentioned
   - confidence_score, tokens_used, cost_usd
   
4. `documents` - PDF files per party
5. `document_text` - Extracted text from PDFs (page-by-page)

**Total Data**: 20 parties with positions across multiple categories

### Styling Approach
- **Framework**: Tailwind CSS (utility-first)
- **Dark Mode**: Class-based dark mode toggle
- **Components**: No CSS modules or styled-components
- **Party Branding**: Tailwind color classes (20 unique party colors defined in party-colors.ts)
- **Responsive**: Mobile-first with sm/lg/xl breakpoints
- **Animations**: Custom fadeIn animation in tailwind.config.ts

### Key Features Identified

1. **Party Grid Homepage**
   - Grid display of all 20 parties with flags/logos
   - Direct navigation to party detail pages
   - "Compare Parties" button

2. **Party Detail Page**
   - Full party information with large flag/logo
   - Sticky TOC for quick navigation by category
   - Expandable accordion sections by category
   - Shows: summary, key proposals (JSON parsed), ideology, budget mentions
   - Links to compare and original PDF

3. **Comparison View**
   - Side-by-side comparison of up to 3 parties
   - URL-based state (search params: ?parties=PLN,PUSC,FA)
   - Category filter to focus on specific topics
   - Compact party headers, grid layout

4. **Filter Components** (not yet explored in detail)
   - Category, Ideology, BudgetType filtering
   - Built but appear to be for future use

### Data Access Pattern
- **Database**: SQLite with better-sqlite3 (read-only mode)
- **Queries**: Prepared statements, indexed lookups
- **Data Fetch**: Server-side in pages, passed to client components
- **Caching**: No explicit caching visible (could be Next.js default)

### Budget Parsing
Sophisticated parser handles:
- PIB percentages (3% del PIB)
- Colones amounts (5.2 billones de colones)
- USD amounts ($500 millones USD)
- Descriptive financial text
- Returns parsed struct with type, numeric value, description

### Image/Asset Structure
- Party flags/logos: `/data/partidos/[party-folder]/` as PNG/JPEG
- Path resolution in `party-images.ts`
- Images used in Next.js Image component
- Header background image in public folder

### UI/UX Patterns
- Sticky headers for navigation (partido page TOC, comparison headers)
- Grid layout for parties
- Accordion for expandable content
- Dark mode support throughout
- Responsive design with Tailwind breakpoints
- Smooth transitions and hover effects

### Outstanding Questions/Notes for Chris
1. The 3 untracked filter components (BudgetTypeFilter, FilterPanel, IdeologyFilter) appear to be new features not yet integrated
2. No visible testing (unit/integration/e2e) - will need to clarify what TDD approach you want
3. Database is read-only, data populates via separate pipeline
4. Uses Bun as runtime but could likely work with Node
5. Tailwind config has custom party colors that aren't fully used (colors defined but components use Tailwind class names instead of hex values)

