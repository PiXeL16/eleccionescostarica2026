{
  "embedding": [
    -0.03047223389148712,
    -0.02902134321630001,
    -0.041743215173482895,
    0.08094549179077148,
    0.0018691675504669547,
    -0.05237116292119026,
    -0.025330448523163795,
    0.025649460032582283,
    -0.04503999650478363,
    0.0937114953994751,
    -0.03352987393736839,
    -0.01207936555147171,
    0.024593377485871315,
    -0.08714299649000168,
    -0.04699275270104408,
    0.0314299613237381,
    0.034556783735752106,
    -0.02187841199338436,
    -0.07255709916353226,
    0.0765281468629837,
    -0.0011824197135865688,
    -0.02804522216320038,
    0.009299859404563904,
    -0.027053920552134514,
    -0.0012629178818315268,
    0.05439738184213638,
    -0.09920188784599304,
    -0.023762060329318047,
    -0.05407743155956268,
    -0.04247838631272316,
    0.005950442049652338,
    0.08869178593158722,
    0.005140101537108421,
    0.10423310101032257,
    0.026899240911006927,
    0.0006007037009112537,
    -0.030284637585282326,
    -0.0712304338812828,
    -0.030426625162363052,
    -0.05128980800509453,
    -0.029685955494642258,
    -0.01262716669589281,
    -0.04067004844546318,
    0.063030906021595,
    -0.014353582635521889,
    -0.040493857115507126,
    -0.09532970190048218,
    0.004115015268325806,
    -0.018147384747862816,
    -0.02347460947930813,
    -0.10145000368356705,
    0.026363546028733253,
    -0.002172660082578659,
    0.09478388726711273,
    0.03325873240828514,
    -0.013456732966005802,
    0.019077124074101448,
    -0.06253356486558914,
    -0.1015300378203392,
    -0.0174569059163332,
    -0.020811567083001137,
    -0.03279508277773857,
    -0.028716621920466423,
    -0.020785586908459663,
    0.016321079805493355,
    0.023685414344072342,
    0.031964998692274094,
    -0.029093299061059952,
    0.0962371975183487,
    -0.0014449809677898884,
    -0.027422543615102768,
    0.08009883761405945,
    -0.12194344401359558,
    0.01960720494389534,
    0.004858447704464197,
    0.04245173558592796,
    0.04845283553004265,
    0.016012828797101974,
    0.027790404856204987,
    -0.0642971619963646,
    -0.04795626550912857,
    -0.02230544202029705,
    0.005418398883193731,
    -0.03960506245493889,
    -0.02866792306303978,
    -0.09970344603061676,
    0.037241820245981216,
    -0.003615471301600337,
    0.042797572910785675,
    0.020336532965302467,
    -0.021244162693619728,
    0.004707420244812965,
    0.04703846573829651,
    -0.03204760700464249,
    0.03897235542535782,
    0.043899938464164734,
    0.060531120747327805,
    0.0026449973229318857,
    0.02541716955602169,
    0.03491140156984329,
    0.005830349866300821,
    0.04347726330161095,
    0.00415407121181488,
    -0.03176305815577507,
    -0.07145047187805176,
    -0.0415487214922905,
    0.03971396014094353,
    0.012088073417544365,
    -0.062477126717567444,
    -0.10167407989501953,
    -0.009260477498173714,
    0.011322157457470894,
    -0.0317743718624115,
    -0.06882140040397644,
    0.03870995715260506,
    0.0016240612603724003,
    0.009781144559383392,
    -0.036251235753297806,
    0.005489089526236057,
    0.0951501876115799,
    0.03949477896094322,
    0.058357123285532,
    -0.00834705214947462,
    0.009995454922318459,
    -0.04311702400445938,
    0.005850477144122124,
    -0.03497670963406563,
    1.3809764938809836e-32,
    -0.0036165621131658554,
    -0.05327083170413971,
    -0.019670328125357628,
    -0.01998806558549404,
    0.0023227634374052286,
    0.0621158704161644,
    0.048275429755449295,
    0.06550585478544235,
    -0.12079866975545883,
    0.03999659791588783,
    -0.04833609610795975,
    0.039448391646146774,
    -0.023936575278639793,
    -0.009919722564518452,
    0.11526770144701004,
    -0.043031856417655945,
    0.027424165979027748,
    0.09476656466722488,
    -0.01560466643422842,
    0.032049987465143204,
    0.07575727254152298,
    0.010516427457332611,
    -0.03727284446358681,
    -0.05501323938369751,
    0.046968087553977966,
    0.03054783307015896,
    -0.04221517965197563,
    -0.011781428940594196,
    -0.04484570771455765,
    0.01000529620796442,
    -0.07385726273059845,
    -0.0230454932898283,
    -0.0739041343331337,
    -0.004563492257148027,
    0.05209220573306084,
    -0.022936709225177765,
    0.0005220017046667635,
    -0.0389765202999115,
    -0.06134922057390213,
    -0.04005207493901253,
    -0.055628009140491486,
    0.02332599088549614,
    -0.00886312685906887,
    -0.07127388566732407,
    -0.05834651365876198,
    -0.022120380774140358,
    -0.0543614886701107,
    0.012897186912596226,
    -0.033071067184209824,
    0.08622996509075165,
    0.022522935643792152,
    0.07001975923776627,
    -0.002812557853758335,
    0.07506963610649109,
    0.028471319004893303,
    0.024429088458418846,
    0.04124165326356888,
    0.011595147661864758,
    0.07042734324932098,
    0.11411954462528229,
    -0.03664485365152359,
    -0.09183603525161743,
    0.04155368357896805,
    -0.004115191753953695,
    0.10078754276037216,
    0.047619275748729706,
    -0.01457976084202528,
    0.01436995342373848,
    0.10416150838136673,
    0.038281120359897614,
    0.01684170961380005,
    -0.03270247206091881,
    0.17137636244297028,
    -0.0406014658510685,
    0.025098344311118126,
    -0.058853354305028915,
    -0.00960893090814352,
    -0.06161113828420639,
    -0.08984570950269699,
    0.023913947865366936,
    -0.0054227751679718494,
    0.003432181430980563,
    0.029300130903720856,
    -0.07915908843278885,
    -0.04156391695141792,
    -0.027273057028651237,
    0.01303544919937849,
    -0.08662193268537521,
    -0.09115881472826004,
    -0.06408151984214783,
    0.01744643785059452,
    -0.011250413954257965,
    -0.007867456413805485,
    -0.06550873070955276,
    -0.017309634014964104,
    -1.3258694656512286e-32,
    0.023895584046840668,
    -0.08343441784381866,
    -0.00928470492362976,
    0.009137625806033611,
    0.04940900206565857,
    0.0017006384441629052,
    -0.04657240957021713,
    -0.06035503372550011,
    -0.02776569128036499,
    -0.06521426886320114,
    -0.009812775999307632,
    0.026273775845766068,
    0.04134836047887802,
    -0.09415148943662643,
    -0.017390156164765358,
    0.06845338642597198,
    0.015360883437097073,
    -0.05686144530773163,
    0.03396318107843399,
    0.1145450621843338,
    -0.009588517248630524,
    0.1247185692191124,
    -0.06951526552438736,
    0.04867297038435936,
    -0.009318745695054531,
    -0.02025439403951168,
    -0.04427917301654816,
    -0.01477443054318428,
    0.004703784827142954,
    -0.03369363024830818,
    0.013448156416416168,
    -0.035732775926589966,
    -0.09878765046596527,
    -0.06205189973115921,
    0.01578587479889393,
    -0.05974528566002846,
    -0.015558335930109024,
    0.040830060839653015,
    -0.03369991108775139,
    0.07197244465351105,
    0.07037197053432465,
    0.041417356580495834,
    -0.023248566314578056,
    0.009987937286496162,
    0.0008124828455038369,
    0.003121974878013134,
    -0.09147081524133682,
    -0.0036753893364220858,
    0.015357624739408493,
    0.0015739956870675087,
    0.0285519789904356,
    -0.05407971143722534,
    -0.01765955425798893,
    0.006382590625435114,
    0.08791365474462509,
    -0.03689400851726532,
    -0.05169760435819626,
    0.004316860809922218,
    -0.0480167455971241,
    -0.028124064207077026,
    0.07272447645664215,
    0.06771676987409592,
    -0.02364603616297245,
    -0.02493874914944172,
    0.09071698784828186,
    -0.01664304919540882,
    -0.06704141199588776,
    -0.03012992814183235,
    -0.06000092625617981,
    0.026408517733216286,
    -0.04273324832320213,
    -0.014806458726525307,
    0.05875411257147789,
    0.039130426943302155,
    0.06543554365634918,
    0.0905320942401886,
    -0.02671770192682743,
    -0.0318298302590847,
    0.049529533833265305,
    0.08064804971218109,
    -0.12558932602405548,
    0.08265607804059982,
    0.02029830403625965,
    -0.028332076966762543,
    -0.024926351383328438,
    -0.0028903346974402666,
    -0.0422942079603672,
    0.07136945426464081,
    -0.04967992752790451,
    0.020513277500867844,
    -0.019584935158491135,
    -0.041898686438798904,
    -0.013621553778648376,
    0.05642639845609665,
    0.04280092567205429,
    -6.963080778632502e-8,
    0.034309688955545425,
    0.021398991346359253,
    -0.08437290042638779,
    0.060850683599710464,
    0.09389281272888184,
    -0.008009593933820724,
    -0.04037000611424446,
    0.10242944955825806,
    -0.04153350368142128,
    0.05017421022057533,
    0.13606083393096924,
    -0.021863698959350586,
    -0.021084990352392197,
    -0.019328325986862183,
    0.04819797724485397,
    -0.03661048784852028,
    0.029218828305602074,
    -0.07468985766172409,
    -0.11296888440847397,
    -0.03922519087791443,
    0.020116787403821945,
    0.051904477179050446,
    -0.0578983910381794,
    -0.03598172217607498,
    0.03871886804699898,
    0.017639245837926865,
    0.047274138778448105,
    0.07888568192720413,
    0.030735235661268234,
    -0.031289298087358475,
    0.027580535039305687,
    -0.0456143394112587,
    -0.07257461547851562,
    -0.025310499593615532,
    0.03947613388299942,
    0.04346056282520294,
    0.0037535596638917923,
    0.01636582240462303,
    -0.017180055379867554,
    0.06871046125888824,
    0.05744636803865433,
    0.02189246006309986,
    0.07179641723632812,
    0.006409194320440292,
    0.017437411472201347,
    -0.0013967014383524656,
    -0.10773171484470367,
    0.02546844258904457,
    0.04622538387775421,
    0.00045004853745922446,
    -0.03360012546181679,
    -0.007673901040107012,
    -0.11624479293823242,
    0.09704367816448212,
    0.07960620522499084,
    0.023758137598633766,
    0.043765585869550705,
    0.0359993577003479,
    0.03499891236424446,
    0.01277410052716732,
    0.07771462202072144,
    -0.07732589542865753,
    -0.05940459296107292,
    0.012002276256680489
  ],
  "text": "### Database Structure\n- 8.2 MB SQLite database\n- 20 parties, 13 categories, 260 positions (13 positions per party)\n- 2,212 pages of extracted text (~5.3 MB total, ~2.4 KB per page)\n- FTS5 virtual table on party_positions indexing summary + key_proposals\n\n### Data Volumes Per Party\n- Average context size: ~12K chars per party (summaries + proposals across 13 categories)\n- Largest: Avanza (PA) with 12,748 chars\n- Average summary: ~700 chars per category\n- Average proposals: ~220 chars per category\n- Full document text per party: ~264 KB average (2,212 pages / 20 parties)\n\n### Current RAG Implementation\n1. **Base Context Loading** (getPartyContext): Loads ALL 13 categories for selected party (~12K chars)\n2. **FTS5 Search** (searchPartyPositions): Optional search retrieves top 3 relevant positions from same data\n3. **Prompt Assembly**: System prompt + all 13 categories + optional 3 FTS results (duplicate data!)\n4. **Full Text**: Option to load raw document text exists but is DISABLED (would add 264KB per party!)\n\n### Key Findings\n- System is NOT using full document text (smart!)\n- System loads entire party context (all 13 categories) every time\n- FTS5 search is redundant - it searches data already in context\n- Context size per request: ~15-20K chars (manageable for gpt-4o)\n- Model: gpt-4o with streaming, temp 0.3\n- No context window issues yet with single party\n\n### Scaling Concerns Identified\n1. Loading all 20 parties simultaneously = 240-300K chars (way too much)\n2. FTS5 not being used effectively (searches already-loaded data)\n3. No chunking strategy for full document access\n4. No semantic embeddings - just keyword search\n5. No caching of common queries\n6. Cold database reads on every request (singleton pattern but no query cache)",
  "sections": [
    "Project Notes",
    "Chat System Architecture Research (Elecciones2026)"
  ],
  "timestamp": 1763028048071,
  "path": "/Users/christopher.jimenez/Src/Personal/Elecciones2026/.private-journal/2025-11-13/11-00-48-071753.md"
}